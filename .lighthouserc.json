# ðŸŽ¯ Lighthouse CI Configuration

ci:
  collect:
    startServerCommand: 'npm run build && npx vite preview --port 3001'
    url:
      - 'http://localhost:3001/'
      - 'http://localhost:3001/flowdistributor'
      - 'http://localhost:3001/smartsales'
      - 'http://localhost:3001/clienthub'
    numberOfRuns: 3
    settings:
      preset: 'desktop'
      throttling:
        rttMs: 40
        throughputKbps: 10240
        cpuSlowdownMultiplier: 1
      screenEmulation:
        mobile: false
        width: 1920
        height: 1080
        deviceScaleFactor: 1
        disabled: false
      formFactor: 'desktop'

  assert:
    preset: 'lighthouse:recommended'
    assertions:
      # Performance
      'categories:performance':
        - error
        - minScore: 0.9
      'first-contentful-paint':
        - error
        - maxNumericValue: 1800
      'largest-contentful-paint':
        - error
        - maxNumericValue: 2500
      'cumulative-layout-shift':
        - error
        - maxNumericValue: 0.1
      'total-blocking-time':
        - error
        - maxNumericValue: 200
      'speed-index':
        - error
        - maxNumericValue: 3800

      # Accessibility
      'categories:accessibility':
        - error
        - minScore: 0.9
      'color-contrast':
        - error
        - minScore: 1
      'button-name':
        - error
        - minScore: 1
      'image-alt':
        - error
        - minScore: 1
      'label':
        - error
        - minScore: 1

      # Best Practices
      'categories:best-practices':
        - error
        - minScore: 0.9
      'uses-http2':
        - warn
        - minScore: 1
      'uses-passive-event-listeners':
        - warn
        - minScore: 1

      # SEO
      'categories:seo':
        - error
        - minScore: 0.9
      'meta-description':
        - error
        - minScore: 1
      'document-title':
        - error
        - minScore: 1
      'robots-txt':
        - warn
        - minScore: 1

  upload:
    target: 'temporary-public-storage'
    # Optional: Configure for permanent storage
    # target: 'lhci'
    # serverBaseUrl: 'https://your-lhci-server.com'
    # token: '$LHCI_TOKEN'

  server:
    # Optional: LHCI server configuration
    # port: 9001
    # storage:
    #   storageMethod: 'sql'
    #   sqlDialect: 'sqlite'
    #   sqlDatabasePath: './lhci.db'
